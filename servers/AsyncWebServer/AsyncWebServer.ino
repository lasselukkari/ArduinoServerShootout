#include <Arduino.h>
#include <WiFi.h>
#include <AsyncTCP.h>
#include <ESPAsyncWebServer.h>

AsyncWebServer server(80);

#define WIFI_SSID ""
#define WIFI_PASSWORD ""

void setup() {
  Serial.begin(115200);

  WiFi.begin(WIFI_SSID, WIFI_PASSWORD);
  while (WiFi.status() != WL_CONNECTED) {
    delay(500);
    Serial.print(".");
  }
  Serial.println(WiFi.localIP());

  server.on("/fourB", HTTP_GET, [](AsyncWebServerRequest * request) {
    request->send(200, "text/plain", "----");
  });

  server.on("/fourKB", HTTP_GET, [](AsyncWebServerRequest * request) {
    request->send(
      200,
      "text/plain",
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------"
    );
  });

  server.on("/fourKBloop", HTTP_GET, [](AsyncWebServerRequest * request) {
    AsyncResponseStream *response = request->beginResponseStream("text/plain");

    for (int i = 0; i < 400; i++) {
      response->print("----------");
    }

    request->send(response);
  });

  server.begin();
}

void loop() {}
